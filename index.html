<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PortoUX ‚Äì Framework Visual para o Setor Portu√°rio</title>
    <link rel="stylesheet" type="text/css" href="./mani-porto.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="v2-data-porto.js"></script>
      <script src="https://cdn.userway.org/widget.js" data-account="09FcxZNn6a"></script>
    
    <style>
        .access-button {
            border-radius: 50px;
        }
    </style>
</head>

<body>
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    <div class="container">

        <header class="framework-header">
            <div class="header-content">
                <h1 class="main-title">PortoUX</h1>
                <p class="framework-subtitle">
                    <strong>Framework Visual para o Setor Portu√°rio</strong>
                </p>
                <p class="main-description">
                    Este framework heur√≠stico transforma princ√≠pios de <strong>UX</strong> e <strong>DataViz</strong> em diretrizes pr√°ticas. Utilize-o para projetar experi√™ncias visuais para dados portu√°rios ‚Äì escolhendo visualiza√ß√µes, estruturando dashboards e destacando os elementos que realmente apoiam a tomada de decis√£o em tempo real.
                </p>
                <p class="framework-credit">
                    <strong>Interfaces que Guiam Decis√µes: A Influ√™ncia do Design de Dashboards no Setor Portu√°rio.</strong>
                    TCC | Bruna L. S. Gama ‚Äì Gest√£o de Dados, UFPI (2025). Inspirado no
                    <a href="https://ft-interactive.github.io/visual-vocabulary/" target="_blank" rel="noopener noreferrer">
                        Visual Vocabulary
                    </a>
                    do Financial Times.
                </p>
            </div>
        </header>

        <div id="timeline-container"></div>
        <div id="info-panel"></div>

    </div>

    <!-- ESTRUTURA DO MODAL DE IMAGEM (LIGHTBOX) -->
    <div id="image-modal" class="image-modal-overlay">
        <div class="image-modal-content">
            <span class="image-modal-close">&times;</span>
            <img src="" alt="Exemplo Aplicado" class="image-modal-img">
            <p class="image-modal-caption"></p>
        </div>
    </div>

    <script>
        const plotCategories = catData.categories;
        let currentOpenCategory = null;

        const lineFunction = d3.svg.line()
            .x(d => d.x)
            .y(d => d.y)
            .interpolate("linear");

        function createTimeline() {
            const timelineContainer = d3.select("#timeline-container");

            const timeline = timelineContainer.append("svg")
                .attr("class", "timeline")
                .attr("width", "100%")
                .attr("height", 50);

            const categoryWidth = 100 / plotCategories.length;

            plotCategories.forEach((cat, i) => {
                const g = timeline.append("g")
                    .attr("class", "category-button")
                    .attr("data-category", cat.category)
                    .style("cursor", "pointer")
                    .on("click", function () {
                        toggleCategory(cat);
                    });

                g.append("text")
                    .attr("x", `${i * categoryWidth + categoryWidth / 2}%`)
                    .attr("y", 25)
                    .attr("text-anchor", "middle")
                    .attr("fill", cat.colour)
                    .attr("font-size", "15px")
                    .attr("font-weight", "600")
                    .text(cat.category);

                g.append("rect")
                    .attr("x", `${i * categoryWidth}%`)
                    .attr("y", 45)
                    .attr("width", `${categoryWidth}%`)
                    .attr("height", 5)
                    .attr("fill", cat.colour)
                    .attr("class", "category-rect");
            });

            timeline.append("path")
                .attr("id", "connection-line")
                .attr("stroke", "#333")
                .attr("stroke-width", 3)
                .attr("fill", "none")
                .style("opacity", 0);
        }

        function toggleCategory(category) {
            const infoPanel = d3.select("#info-panel");
            const connectionPath = d3.select("#connection-line");

            if (currentOpenCategory === category.category) {
                infoPanel.transition().duration(300)
                    .style("max-height", "0px")
                    .style("opacity", 0)
                    .style("margin-top", "0px");
                connectionPath.transition().duration(300).style("opacity", 0);
                currentOpenCategory = null;
                return;
            }

            currentOpenCategory = category.category;

            const categoryIndex = plotCategories.findIndex(c => c.category === category.category);
            const categoryWidth = 100 / plotCategories.length;
            const timelineWidth = d3.select(".timeline").node().getBoundingClientRect().width;
            const lineX = (categoryIndex * categoryWidth + categoryWidth / 2) / 100 * timelineWidth;
            
            const pathData = [
                { x: lineX, y: 50 },
                { x: lineX, y: 60 },
                { x: lineX, y: 60 },
                { x: lineX, y: 90 }
            ];

            connectionPath
                .attr("stroke", category.colour)
                .attr("d", lineFunction(pathData))
                .transition().duration(300)
                .style("opacity", 1);

            infoPanel.transition().duration(100).style("margin-top", "32px");
            infoPanel.html("");

            const panel = infoPanel.append("div")
                .attr("class", "info-panel-content")
                .style("background-color", category.colour);

            panel.append("h2").attr("class", "panel-title").text(category.category);
            panel.append("p").attr("class", "panel-description").text(category.description);
            panel.append("h3").attr("class", "panel-subhead").text("Exemplo aplicado");

            // O par√°grafo de exemplo agora √© um link clic√°vel que ativa o modal
            const exampleLink = panel.append("a")
                .attr("href", "#")
                .attr("class", "panel-example example-trigger")
                .attr("data-img", category.example.img)
                .attr("data-caption", category.example.text);
            
            exampleLink.html(category.example.text + ` <span class="view-icon">üëÅÔ∏è</span>`);

            panel.append("h3").attr("class", "panel-subhead").text("Boas pr√°ticas e componentes");

            const cardsContainer = panel.append("div").attr("class", "cards-container");

            category.children.forEach(child => {
                const card = cardsContainer.append("div").attr("class", "chart-card");
                card.append("div").attr("class", "chart-icon").style("background-color", "rgba(0, 0, 0, 0.2)").html(getIconSVG(child.name));
                card.append("h4").attr("class", "chart-name").text(child.name);
                card.append("p").attr("class", "chart-description").text(child.description);
                if (child.usePara) { card.append("p").attr("class", "chart-use").html(`<strong>Use para:</strong> ${child.usePara}`); }
                if (child.faca && child.evite) {
                    const practicesContainer = card.append("div").attr("class", "practices-container");
                    const doSection = practicesContainer.append("div").attr("class", "practice-section do-section");
                    doSection.append("h5").attr("class", "practice-title").text("Fa√ßa");
                    const doList = doSection.append("ul").attr("class", "practice-list");
                    child.faca.forEach(item => doList.append("li").text(item));
                    const dontSection = practicesContainer.append("div").attr("class", "practice-section dont-section");
                    dontSection.append("h5").attr("class", "practice-title").text("Evite");
                    const dontList = dontSection.append("ul").attr("class", "practice-list");
                    child.evite.forEach(item => dontList.append("li").text(item));
                }
            });

            infoPanel.transition().duration(300).style("max-height", "5000px").style("opacity", 1);
        }

        createTimeline();

        // O MODAL DE IMAGEM
        function setupModal() {
            const modal = document.getElementById('image-modal');
            const modalImg = modal.querySelector('.image-modal-img');
            const modalCaption = modal.querySelector('.image-modal-caption');
            const closeBtn = modal.querySelector('.image-modal-close');

            document.body.addEventListener('click', function(event) {
                const trigger = event.target.closest('.example-trigger');
                if (trigger) {
                    event.preventDefault();
                    modalImg.src = trigger.dataset.img;
                    modalCaption.textContent = trigger.dataset.caption;
                    modal.classList.add('active');
                }
            });

            function closeModal() {
                modal.classList.remove('active');
            }

            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            });
        }

        setupModal(); 

        window.addEventListener("resize", () => {
            if (currentOpenCategory) {
                const category = plotCategories.find(c => c.category === currentOpenCategory);
                toggleCategory(category);
                toggleCategory(category);
            }
        });
    </script>

    <script>
        const ICONS = {
            "Paleta Sem√¢ntica do Porto": `<svg viewBox="0 0 64 64"><defs><linearGradient id="g1" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#58D68D;" /><stop offset="100%" style="stop-color:#28a745;" /></linearGradient><linearGradient id="g2" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#F7DC6F;" /><stop offset="100%" style="stop-color:#FBC02D;" /></linearGradient><linearGradient id="g3" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#F1948A;" /><stop offset="100%" style="stop-color:#dc3545;" /></linearGradient></defs><g transform="rotate(10 32 32)"><rect x="10" y="12" width="12" height="40" rx="4" fill="url(#g1)" /><rect x="26" y="12" width="12" height="40" rx="4" fill="url(#g2)" /><rect x="42" y="12" width="12" height="40" rx="4" fill="url(#g3)" /></g></svg>`,
            "Tipografia Robusta": `<svg viewBox="0 0 64 64"><g fill="#E0E1DD"><text x="12" y="52" font-size="48" font-family="Roboto, sans-serif" font-weight="700">A</text><text x="40" y="52" font-size="32" font-family="Roboto, sans-serif" font-weight="400">a</text></g></svg>`,
            "Contraste por Ambiente": `<svg viewBox="0 0 64 64"><path d="M32,56C17.6,56,6,44.4,6,30S17.6,4,32,4Z" fill="#0D1B2A"/><path d="M32,4C46.4,4,58,15.6,58,30S46.4,56,32,56Z" fill="#E0E1DD"/></svg>`,
            "Redu√ß√£o de Chartjunk": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2.5" stroke-linecap="round"><path d="M10 54 L 10 10 L 54 10" stroke-opacity="0.5"/><path d="M16 48 V 30" stroke-width="8"/><path d="M32 48 V 20" stroke-width="8"/><path d="M48 48 V 40" stroke-width="8"/><line x1="20" y1="14" x2="4" y2="30" stroke="#dc3545" stroke-width="3"/><line x1="4" y1="14" x2="20" y2="30" stroke="#dc3545" stroke-width="3"/></g></svg>`,
            "Consist√™ncia de √çcones": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 14 l-8 8 8 8"/><path d="M46 14 l8 8-8 8"/><circle cx="32" cy="42" r="8"/><path d="M28 42h8"/></g></svg>`,
            "Espa√ßamento (Whitespace)": `<svg viewBox="0 0 64 64"><g fill="#E0E1DD" fill-opacity="0.1" stroke="#E0E1DD" stroke-width="2"><rect x="10" y="10" width="44" height="44" rx="4"/><rect x="18" y="18" width="28" height="12" rx="2" fill="rgba(65, 90, 119, 0.8)"/><rect x="18" y="38" width="28" height="8" rx="2" fill="rgba(65, 90, 119, 0.8)"/></g></svg>`,
            "KPIs no Topo (F/Z)": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2"><rect x="6" y="10" width="52" height="44" rx="4" fill="rgba(65, 90, 119, 0.5)" stroke="none"/><path d="M12 20 H 52 M 12 28 H 32"/><path d="M10,24 L20,14 M10,48 L54,48 M10,36 L54,36" stroke-opacity="0.5"/></g></svg>`,
            "Fluxo Vis√£o‚ÜíFiltro‚ÜíDetalhe": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2" stroke-linecap="round"><path d="M8 32 L 56 32" stroke-dasharray="4 4" /><circle cx="14" cy="32" r="6" fill="rgba(65, 90, 119, 0.7)" /><circle cx="32" cy="32" r="8" fill="rgba(127, 169, 223, 0.7)" /><circle cx="50" cy="32" r="10" fill="rgba(169, 204, 255, 0.7)" /></g></svg>`,
            "R√≥tulos e Alinhamento": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2.5" stroke-linecap="round"><path d="M14 18 H 30"/><path d="M14 32 H 24"/><path d="M14 46 H 34"/><path d="M50 18 H 40"/><path d="M50 32 H 44"/><path d="M50 46 H 38"/></g></svg>`,
            "Agrupamento Visual": `<svg viewBox="0 0 64 64"><rect x="8" y="8" width="24" height="48" rx="4" fill="rgba(65, 90, 119, 0.5)" /><rect x="36" y="8" width="20" height="20" rx="4" fill="rgba(65, 90, 119, 0.5)" /><rect x="36" y="36" width="20" height="20" rx="4" fill="rgba(65, 90, 119, 0.5)" /></g></svg>`,
            "Estrutura Multi-Aba": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2"><path d="M8,52 V18 C8,15,10,13,13,13 H24 V10 h16 v3 h11 c3,0,5,2,5,5 V52 Z" fill="rgba(65, 90, 119, 0.5)"/><path d="M25 13 V 10 h14 v3" fill="rgba(127, 169, 223, 0.7)"/></g></svg>`,
            "Uso de M√∫ltiplos Pain√©is": `<svg viewBox="0 0 64 64"><g fill="rgba(65, 90, 119, 0.5)" stroke="#E0E1DD" stroke-width="2"><rect x="8" y="8" width="22" height="22" rx="3"/><rect x="34" y="8" width="22" height="22" rx="3"/><rect x="8" y="34" width="22" height="22" rx="3"/><rect x="34" y="34" width="22" height="22" rx="3"/></g></svg>`,
            "Controles Consistentes": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2.5" stroke-linecap="round"><circle cx="22" cy="24" r="8" fill="rgba(65, 90, 119, 0.7)" /><path d="M22 32 V 48"/><rect x="36" y="18" width="14" height="28" rx="7" fill="rgba(65, 90, 119, 0.7)"/></g></svg>`,
            "Estados Visuais Claros": `<svg viewBox="0 0 64 64"><g stroke-width="2.5"><rect x="6" y="24" width="16" height="16" rx="4" fill="#E0E1DD"/><rect x="24" y="24" width="16" height="16" rx="4" fill="rgba(127, 169, 223, 0.7)" stroke="#E0E1DD"/><rect x="42" y="24" width="16" height="16" rx="4" fill="rgba(65, 90, 119, 0.5)" stroke="#E0E1DD" stroke-dasharray="3 3"/></g></svg>`,
            "Preven√ß√£o de Erros": `<svg viewBox="0 0 64 64"><g stroke="#f1948a" fill="none" stroke-width="4" stroke-linecap="round"><circle cx="32" cy="32" r="22" fill="rgba(220, 53, 69, 0.3)"/><path d="M22 42 L 42 22 M22 22 L 42 42"/></g></svg>`,
            "Filtro Simples vs. Avan√ßado": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="3" stroke-linecap="round"><path d="M12 18 H 52 M 18 32 H 46 M 24 46 H 40"/><path d="M 54 50 l -6 -6" stroke-width="2" stroke-dasharray="2 2"/></g></svg>`,
            "Explora√ß√£o Intuitiva": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2.5"><circle cx="28" cy="28" r="16" fill="rgba(65, 90, 119, 0.5)"/><path d="M40 40 L 52 52"/><path d="M28 18 v 20 M 18 28 h 20" stroke-opacity="0.5" stroke-dasharray="3 3"/></g></svg>`,
            "Redund√¢ncia √† Cor": `<svg viewBox="0 0 64 64"><g fill="#E0E1DD" text-anchor="middle" font-size="14" font-weight="bold"><circle cx="20" cy="32" r="12" fill="#28a745"/><text x="20" y="37" fill="#fff">‚úì</text><path d="M42 20 L 54 44 L 30 44 Z" fill="#dc3545"/><text x="42" y="38" fill="#fff">!</text></g></svg>`,
            "Tamanhos e Espa√ßamento": `<svg viewBox="0 0 64 64"><rect x="8" y="20" width="22" height="22" rx="4" fill="rgba(65, 90, 119, 0.5)"/><rect x="34" y="20" width="22" height="22" rx="4" fill="rgba(65, 90, 119, 0.5)"/><path d="M30 24 l -4 8 4 8 M34 24 l 4 8-4 8" fill="none" stroke="#E0E1DD" stroke-width="2" stroke-linecap="round"/></g></svg>`,
            "Navega√ß√£o por Teclado": `<svg viewBox="0 0 64 64"><g fill="rgba(65, 90, 119, 0.5)" stroke="#E0E1DD" stroke-width="2" stroke-linecap="round"><rect x="10" y="16" width="12" height="12" rx="2"/><rect x="26" y="16" width="12" height="12" rx="2"/><rect x="42" y="16" width="12" height="12" rx="2"/><rect x="10" y="36" width="44" height="12" rx="2" fill="rgba(127, 169, 223, 0.7)"/></g></svg>`,
            "Paleta para Daltonismo": `<svg viewBox="0 0 64 64"><g stroke-width="2.5"><rect x="10" y="20" width="20" height="24" fill="#0072B2"/><rect x="34" y="20" width="20" height="24" fill="#D55E00"/></g></svg>`,
            "Design Responsivo": `<svg viewBox="0 0 64 64"><g fill="none" stroke="#E0E1DD" stroke-width="2"><rect x="8" y="16" width="36" height="32" rx="3" fill="rgba(65, 90, 119, 0.5)" /><rect x="48" y="24" width="10" height="16" rx="2" fill="rgba(65, 90, 119, 0.5)" /></g></svg>`,
            "Gr√°fico de Linhas (Tend√™ncia)": `<svg viewBox="0 0 64 64"><g fill="none" stroke-width="2.5"><path d="M10 54 L 10 10" stroke="#E0E1DD" stroke-opacity="0.5"/><path d="M10 54 L 54 54" stroke="#E0E1DD" stroke-opacity="0.5"/><polyline points="14,48 24,30 38,38 50,20" stroke="#63a4ff" stroke-width="3" stroke-linecap="round"/></g></svg>`,
            "Gr√°fico de Barras (Compara√ß√£o)": `<svg viewBox="0 0 64 64"><g fill="#415A77" stroke="#E0E1DD" stroke-width="2"><path d="M10 54 L 10 10 L 54 10" fill="none" stroke-opacity="0.5"/><rect x="14" y="30" width="10" height="24" rx="2"/><rect x="27" y="20" width="10" height="34" rx="2"/><rect x="40" y="40" width="10" height="14" rx="2"/></g></svg>`,
            "Gr√°fico de Dispers√£o (Correla√ß√£o)": `<svg viewBox="0 0 64 64"><g fill="#63a4ff"><path d="M10 54 L 10 10 L 54 10" fill="none" stroke="#E0E1DD" stroke-opacity="0.5" stroke-width="2"/><circle cx="18" cy="45" r="3"/><circle cx="25" cy="38" r="3"/><circle cx="30" cy="35" r="3"/><circle cx="38" cy="28" r="3"/><circle cx="46" cy="20" r="3"/></g></svg>`,
            "Gr√°fico de Funil (Fluxo)": `<svg viewBox="0 0 64 64"><g fill="rgba(65, 90, 119, 0.5)" stroke="#E0E1DD" stroke-width="2" stroke-linejoin="round"><path d="M12 14 H 52 L 42 32 H 22 Z"/><path d="M22 32 L 32 50 L 42 32 Z" fill="rgba(127, 169, 223, 0.7)"/></g></svg>`,
            "Feedback Instant√¢neo": `<svg viewBox="0 0 64 64"><g fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M32 12 L39.39 26.61 L56 29 L44 40.6 L46.78 56 L32 48.1 L17.22 56 L20 40.6 L8 29 L24.61 26.61 Z" stroke="#FBC02D" stroke-width="3" fill="rgba(251, 192, 45, 0.2)"/><path d="M32 32 C 40 32 40 40 40 40" stroke="#E0E1DD" stroke-width="2.5" stroke-dasharray="4 4"/></g></svg>`,
            "Linguagem Simples": `<svg viewBox="0 0 64 64"><g stroke-linecap="round" stroke-linejoin="round" stroke="#E0E1DD" fill="none" stroke-width="2.5"><path d="M16 18 H 40 L 48 26 V 46 H 16 Z" fill="rgba(65, 90, 119, 0.5)"/><path d="M22 28 H 36 M22 36 H 30" stroke-width="2"/></g></svg>`,
            "Narrativa e Anota√ß√µes": `<svg viewBox="0 0 64 64"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"><path d="M10 50 C 18 25, 30 22, 38, 34 C 46 46, 50 42, 54 30" stroke="#63a4ff" stroke-width="3"/><rect x="12" y="12" width="20" height="12" rx="2" fill="rgba(65, 90, 119, 0.7)" stroke="#E0E1DD"/><path d="M22 24 L 36 32" stroke="#E0E1DD" stroke-dasharray="3 3"/></g></svg>`,
            "Indicadores de Incerteza": `<svg viewBox="0 0 64 64"><g stroke-linecap="round" stroke-linejoin="round"><path d="M10 44 C 20 16, 40 16, 54 44" fill="rgba(99, 164, 255, 0.3)" stroke="none" /><path d="M10 44 C 20 16, 40 16, 54 44" fill="none" stroke="#63a4ff" stroke-width="3" stroke-dasharray="1 6"/></g></svg>`
        };

        function getDefaultIconSVG() {
            return `<svg viewBox="0 0 64 64" role="img" aria-label="Visual"><g fill="none" stroke="#E0E1DD" stroke-width="2.5" stroke-linecap="round"><rect x="10" y="12" width="44" height="36" rx="4"/><circle cx="24" cy="30" r="6"/><line x1="34" y1="30" x2="48" y2="30"/></g></svg>`;
        }

        function getIconSVG(name) {
            return ICONS[name] || getDefaultIconSVG();
        }
    </script>
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>
    <script src="acessibilidade.js"></script>

</body>
</html>